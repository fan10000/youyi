import{c as u,d,f,g as w}from"./consult-7375c68e.js";import{g as v}from"./order-59513380.js";import{s as m}from"./user-15b71d69.js";import{O as y}from"./index-aff5b717.js";import{a as n,b as c,s as p}from"./request-4f3541ce.js";import{s as O}from"./function-call-8f5e9707.js";import{u as o,Z as g,L as h}from"./_plugin-vue_export-helper-4a308993.js";const T=(r="doc")=>{const e=o(!1);return{loading:e,follow:async a=>{e.value=!0;try{await f(a.id,r),a.likeFlag=a.likeFlag===1?0:1}finally{e.value=!0}}}},D=()=>({showPrescription:async e=>{if(e){const s=await w(e);O([s.data.url])}}}),k=()=>{const r=o(!1);return{loading:r,cancelConsultOrder:async s=>{r.value=!0;try{await u(s.id),s.status=y.ConsultCancel,s.statusValue="已取消",n("取消成功")}catch{c("取消失败")}finally{r.value=!1}}}},U=r=>{const e=o(!1);return{loading:e,deleteConsultOrder:async a=>{e.value=!0;try{await d(a.id),r&&r(),n("删除成功")}catch{c("删除失败")}finally{e.value=!1}}}},x=r=>{const e=o(!1),s=o();return g(async()=>{e.value=!0;try{const a=await v(r);s.value=a.data}finally{e.value=!1}}),{loading:e,order:s}},L=(r,e)=>{const s=o(),a=o(0);let t;const i=async()=>{var l;a.value>0||(await((l=s.value)==null?void 0:l.validate("mobile")),await m(r.value,e),p("发送成功"),a.value=60,t&&clearInterval(t),t=window.setInterval(()=>{a.value--,a.value<=0&&window.clearInterval(t)},1e3))};return h(()=>{window.clearInterval(t)}),{form:s,time:a,onSend:i}};export{T as a,D as b,k as c,U as d,x as e,L as u};
