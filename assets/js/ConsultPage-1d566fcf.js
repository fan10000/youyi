import{_ as P}from"./CpNavBar-ea159524.js";import{O as _,C as x}from"./index-aff5b717.js";import{_ as D}from"./CpConsultMore-148dab4a.js";import{_ as S}from"./avatar-doctor-f51aff84.js";import{c as B,d as V,b as N}from"./index-131db99c.js";import{O as w,o as l,R as c,S as a,T as b,V as F,K as s,Q as o,U as n,W as d,ab as g,c as I,X as U,Y as W,_ as L,u as k,a5 as E,a7 as K}from"./_plugin-vue_export-helper-4a308993.js";import{B as M}from"./index-a2a726fb.js";import{l as Q}from"./consult-7375c68e.js";import{L as R,T as X,a as Y}from"./index-8595ab64.js";import"./vue-router-fd42b9e3.js";import"./use-placeholder-ca8c31e0.js";import"./index-f7b1a7d1.js";import"./request-4f3541ce.js";import"./index-5f55da43.js";import"./interceptor-4f4458bc.js";import"./order-59513380.js";import"./user-15b71d69.js";import"./function-call-8f5e9707.js";import"./index-23e5296c.js";import"./use-route-27c093b5.js";import"./use-id-7753a9b6.js";import"./use-refs-2bc2aeb5.js";const $=t=>(U("data-v-2648be2d"),t=t(),W(),t),j={class:"consult-item"},q={class:"head van-hairline--bottom"},A=$(()=>a("img",{class:"img",src:S},null,-1)),G={class:"body-row"},H=$(()=>a("div",{class:"body-label"},"病情描述",-1)),J={class:"body-value"},Z={class:"body-row"},tt=$(()=>a("div",{class:"body-label"},"价格",-1)),et={class:"body-value"},st={class:"body-row"},ot=$(()=>a("div",{class:"body-label"},"创建时间",-1)),nt={class:"body-value tip"},at={key:0,class:"foot"},it={key:1,class:"foot"},lt={key:2,class:"foot"},dt={key:3,class:"foot"},rt={key:4,class:"foot"},ut=w({__name:"ConsultItem",props:{item:null},emits:["on-delete"],setup(t,{emit:z}){const y=t,{loading:m,cancelConsultOrder:r}=B(),{loading:u,deleteConsultOrder:C}=V(()=>{z("on-delete",y.item.id)}),{showPrescription:h}=N();return(p,e)=>{var T;const i=M,v=D;return l(),c("div",j,[a("div",q,[A,a("p",null,b(((T=t.item.docInfo)==null?void 0:T.name)||"暂未分配医生"),1),a("span",{class:F({orange:t.item.status===s(_).ConsultPay,green:t.item.status===s(_).ConsultChat})},b(t.item.statusValue),3)]),a("div",{class:"body",onClick:e[0]||(e[0]=f=>p.$router.push(`/user/consult/${t.item.id}`))},[a("div",G,[H,a("div",J,b(t.item.illnessDesc),1)]),a("div",Z,[tt,a("div",et,"¥ "+b(t.item.payment.toFixed(2)),1)]),a("div",st,[ot,a("div",nt,b(t.item.createTime),1)])]),t.item.status===s(_).ConsultPay?(l(),c("div",at,[o(i,{class:"gray",plain:"",round:"",size:"small",loading:s(m),onClick:e[1]||(e[1]=f=>s(r)(t.item))},{default:n(()=>[d("取消问诊 ")]),_:1},8,["loading"]),o(i,{type:"primary",plain:"",round:"",size:"small",to:`/user/consult/${t.item.id}`},{default:n(()=>[d(" 去支付 ")]),_:1},8,["to"])])):g("",!0),t.item.status===s(_).ConsultWait?(l(),c("div",it,[o(i,{class:"gray",plain:"",round:"",size:"small",loading:s(m),onClick:e[2]||(e[2]=f=>s(r)(t.item))},{default:n(()=>[d("取消问诊 ")]),_:1},8,["loading"]),o(i,{type:"primary",plain:"",round:"",size:"small",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 继续沟通 ")]),_:1},8,["to"])])):g("",!0),t.item.status===s(_).ConsultChat?(l(),c("div",lt,[t.item.prescriptionId?(l(),I(i,{key:0,class:"gray",plain:"",round:"",size:"small",onClick:e[3]||(e[3]=f=>s(h)(t.item.prescriptionId))},{default:n(()=>[d(" 查看处方 ")]),_:1})):g("",!0),o(i,{type:"primary",plain:"",round:"",size:"small",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 继续沟通 ")]),_:1},8,["to"])])):g("",!0),t.item.status===s(_).ConsultComplete?(l(),c("div",dt,[o(v,{display:!t.item.prescriptionId,onOnDelelte:e[4]||(e[4]=f=>s(C)(t.item)),onOnPreview:e[5]||(e[5]=f=>s(h)(t.item.prescriptionId))},null,8,["display"]),o(i,{class:"gray",plain:"",round:"",size:"small",to:`/room?orderId=${t.item.id}`},{default:n(()=>[d(" 问诊记录 ")]),_:1},8,["to"]),t.item.evaluateId?(l(),I(i,{key:1,type:"primary",plain:"",round:"",size:"small",to:`/user/consult/${t.item.id}`},{default:n(()=>[d("查看评价 ")]),_:1},8,["to"])):(l(),I(i,{key:0,type:"primary",plain:"",round:"",size:"small"},{default:n(()=>[d(" 去评价 ")]),_:1}))])):g("",!0),t.item.status===s(_).ConsultCancel?(l(),c("div",rt,[o(i,{class:"gray",plain:"",round:"",size:"small",loading:s(u),onClick:e[6]||(e[6]=f=>s(C)(t.item))},{default:n(()=>[d("删除订单")]),_:1},8,["loading"]),o(i,{type:"primary",plain:"",round:"",size:"small",to:"/`"},{default:n(()=>[d("咨询其他医生")]),_:1})])):g("",!0)])}}});const ct=L(ut,[["__scopeId","data-v-2648be2d"]]),mt={class:"consult-list"},pt=w({__name:"ConsultList",props:{type:null},setup(t){const y=k({type:t.type,current:1,pageSize:5}),m=k(!1),r=k(!1),u=k([]),C=async()=>{const p=await Q(y.value);u.value.push(...p.data.rows),m.value=!1,y.value.current<p.data.pageTotal?y.value.current++:r.value=!0},h=p=>{u.value=u.value.filter(e=>e.id!=p),u.value.length||C()};return(p,e)=>{const i=R;return l(),c("div",mt,[o(i,{loading:m.value,"onUpdate:loading":e[0]||(e[0]=v=>m.value=v),finished:r.value,"finished-text":"没有更多了",onLoad:C},{default:n(()=>[(l(!0),c(E,null,K(u.value,v=>(l(),I(ct,{key:v.id,item:v,onOnDelete:h},null,8,["item"]))),128))]),_:1},8,["loading","finished"])])}}});const O=L(pt,[["__scopeId","data-v-f3b9b46c"]]),_t={class:"consult-page"},yt=w({__name:"ConsultPage",setup(t){return(z,y)=>{const m=P,r=X,u=Y;return l(),c("div",_t,[o(m,{title:"问诊记录"}),o(u,{sticky:""},{default:n(()=>[o(r,{title:"极速问诊"},{default:n(()=>[o(O,{type:s(x).Fast},null,8,["type"])]),_:1}),o(r,{title:"找医生"},{default:n(()=>[o(O,{type:s(x).Doctor},null,8,["type"])]),_:1}),o(r,{title:"开药问诊"},{default:n(()=>[o(O,{type:s(x).Medication},null,8,["type"])]),_:1})]),_:1})])}}});const Ut=L(yt,[["__scopeId","data-v-14b9ca07"]]);export{Ut as default};
