import{_ as T}from"./CpRadioBtn-79647bf8.js";import{_ as F}from"./CpIcon-56491ba7.js";import{_ as B}from"./CpNavBar-ea159524.js";import{_ as U}from"./avatar-doctor-f51aff84.js";import{u as k}from"./consult-7375c68e.js";import{I as c}from"./index-aff5b717.js";import{e as w,b as S}from"./vue-router-fd42b9e3.js";import{U as M}from"./index-3a14c3b7.js";import{O,u as v,I as A,Z as N,o as R,R as z,Q as n,S as l,U as L,W,V as Y,K as E,X as H,Y as K,_ as P}from"./_plugin-vue_export-helper-4a308993.js";import{s as Q}from"./function-call-4bcc473f.js";import{F as X}from"./index-da14ea08.js";import{B as Z}from"./index-a2a726fb.js";import{s as _}from"./request-4f3541ce.js";import"./use-placeholder-ca8c31e0.js";import"./index-f7b1a7d1.js";import"./index-5f55da43.js";import"./function-call-8f5e9707.js";import"./index-23e5296c.js";import"./interceptor-4f4458bc.js";import"./index-470ccc52.js";import"./use-route-27c093b5.js";import"./index-93886e3d.js";import"./use-id-7753a9b6.js";const i=u=>(H("data-v-27db1e39"),u=u(),K(),u),j={class:"consult-illness-page"},q={class:"illness-tip van-hairline--bottom"},G=i(()=>l("img",{class:"img",src:U,alt:""},null,-1)),J={class:"info"},$=i(()=>l("p",{class:"tit"},"在线医生",-1)),ss=i(()=>l("p",{class:"tip"},"请描述你的疾病或症状、是否用药、就诊经历，需要我听过什么样的帮助",-1)),es={class:"safe"},os=i(()=>l("span",null,"内容仅医生可见",-1)),ls={class:"illness-form"},ts={class:"item"},as=i(()=>l("p",null,"本次患病多久了？",-1)),ns={class:"item"},is=i(()=>l("p",null,"此次病情是否去医院就诊过？",-1)),us={class:"illness-img"},rs=i(()=>l("p",{class:"tip"},"上传内容仅医生可见,最多9张图,最大5MB",-1)),cs=O({__name:"ConsultIllness",setup(u){const f=[{label:"一周内",value:c.Week},{label:"一月内",value:c.Month},{label:"半年内",value:c.HalfYear},{label:"大于半年",value:c.More}],g=[{label:"就诊过",value:0},{label:"没就诊过",value:1}],s=v({illnessDesc:"",illnessTime:void 0,consultFlag:void 0,pictures:[]}),p=v([]),h=o=>{Array.isArray(o)||o.file&&(o.status="uploading",o.message="上传中",k(o.file).then(e=>{var t;o.status="done",o.message="上传成功",o.url=e.data.url,(t=s.value.pictures)==null||t.push(e.data)}).catch(()=>{o.status="failed",o.message="上传失败"}))},V=o=>{var e;s.value.pictures=(e=s.value.pictures)==null?void 0:e.filter(t=>t.url!==o.url)},b=A(()=>!s.value.illnessDesc||s.value.illnessTime===void 0||s.value.consultFlag===void 0),m=w(),I=S(),x=()=>{if(!s.value.illnessDesc)return _("请输入病情描述");if(s.value.illnessTime===void 0)return _("请选择病症时间");if(s.value.consultFlag===void 0)return _("请选择是否就诊过");m.setIllness(s.value),I.push("/user/patient?isChange=1")};return N(()=>{m.consult.illnessDesc&&Q({title:"温馨提示",message:"是否恢复您之前填写的病情信息呢？",confirmButtonColor:"var(--cp-primary)",closeOnPopstate:!1}).then(()=>{const{illnessDesc:o,illnessTime:e,consultFlag:t,pictures:r}=m.consult;s.value={illnessDesc:o,illnessTime:e,consultFlag:t,pictures:r},p.value=r||[]}).catch(()=>{})}),(o,e)=>{const t=B,r=F,C=X,d=T,y=M,D=Z;return R(),z("div",j,[n(t,{title:"图文问诊"}),l("div",q,[G,l("div",J,[$,ss,l("p",es,[n(r,{name:"consult-safe"}),os])])]),l("div",ls,[n(C,{type:"textarea",rows:"3",placeholder:"请详细描述您的病情，病情描述不能为空",modelValue:s.value.illnessDesc,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.illnessDesc=a)},null,8,["modelValue"]),l("div",ts,[as,n(d,{options:f,modelValue:s.value.illnessTime,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.illnessTime=a)},null,8,["modelValue"])]),l("div",ns,[is,n(d,{options:g,modelValue:s.value.consultFlag,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.consultFlag=a)},null,8,["modelValue"])]),l("div",us,[n(y,{"after-read":h,onDelete:V,modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),"upload-icon":"photo-o","upload-text":"上传图片","max-count":"9","max-size":5*1024*1024},null,8,["modelValue"]),rs]),n(D,{class:Y({display:E(b)}),onClick:x,type:"primary",block:"",round:""},{default:L(()=>[W("下一步")]),_:1},8,["class"])])])}}});const Os=P(cs,[["__scopeId","data-v-27db1e39"]]);export{Os as default};
