import{_ as G}from"./CpPaySheet-93ad77aa.js";import{_ as K}from"./CpConsultMore-148dab4a.js";import{_ as L}from"./CpNavBar-ea159524.js";import{_ as M}from"./avatar-doctor-f51aff84.js";import{O as p}from"./index-aff5b717.js";import{k as Q}from"./consult-7375c68e.js";import{C as X,g as Y,a as Z}from"./filter-2a0b1dd2.js";import{d as j}from"./vue-router-fd42b9e3.js";import{c as q,d as A,b as H}from"./index-131db99c.js";import{r as J}from"./index-5f55da43.js";import{a as ee}from"./index-fd8cd520.js";import{S as te}from"./index-4fee20b9.js";import{O as oe,u as S,Z as ae,o as i,R as c,Q as t,S as a,T as f,V as h,K as o,U as s,W as n,ab as _,c as k,X as le,Y as se,_ as ne}from"./_plugin-vue_export-helper-4a308993.js";import{I as ue}from"./index-f7b1a7d1.js";import{C as ie}from"./index-93886e3d.js";import{C as re}from"./index-7ca2e351.js";import{B as de}from"./index-a2a726fb.js";import{s as T}from"./request-4f3541ce.js";import"./CpIcon-56491ba7.js";import"./index-009019c7.js";import"./use-placeholder-ca8c31e0.js";import"./order-59513380.js";import"./user-15b71d69.js";import"./function-call-8f5e9707.js";import"./index-23e5296c.js";import"./interceptor-4f4458bc.js";import"./use-route-27c093b5.js";const y=C=>(le("data-v-fc3884c6"),C=C(),se(),C),pe={key:0,class:"consult-detail-page"},ce={class:"detail-head"},_e={class:"text"},ve=y(()=>a("p",{class:"tip"},"服务医生信息",-1)),me={class:"card"},fe=y(()=>a("img",{class:"avatar",src:M,alt:""},null,-1)),ye={class:"doc"},Ce=y(()=>a("span",null,"极速问诊",-1)),ge={class:"detail-patient"},he={class:"detail-order"},ke=y(()=>a("h3",null,"订单信息",-1)),Ie={key:0,class:"detail-time"},we={key:1,class:"detail-action van-hairline--top"},$e={class:"price"},xe=y(()=>a("span",null,"需付款",-1)),De={key:2,class:"detail-action van-hairline--top"},be={key:3,class:"detail-action van-hairline--top"},Pe={key:4,class:"detail-action van-hairline--top"},Oe={key:5,class:"detail-action van-hairline--top"},Se={key:1,class:"consult-detail-page"},Te=oe({__name:"ConsultDetail",setup(C){const F=j(),e=S();ae(async()=>{const v=await Q(F.params.id);e.value=v.data});const{loading:I,cancelConsultOrder:w}=q(),{loading:N,deleteConsultOrder:$}=A(()=>{J.push("/user/consult")}),{showPrescription:x}=H(),{copy:V,isSupported:B}=ee(),R=async()=>{var v;if(!B.value)return T("不支持，或未授权");await V(((v=e.value)==null?void 0:v.orderNo)||""),T("已复制")},g=S(!1);return(v,l)=>{var O;const D=L,U=ue,r=ie,b=re,W=X,u=de,z=K,E=G,P=te;return e.value?(i(),c("div",pe,[t(D,{title:"问诊详情"}),a("div",ce,[a("div",_e,[a("h3",null,"图文问诊 "+f(e.value.payment)+" 元",1),a("span",{class:h(["sta",{orange:e.value.status===o(p).ConsultPay,green:e.value.status===o(p).ConsultChat}])},f(e.value.statusValue),3),ve]),a("div",me,[fe,a("p",ye,[Ce,a("span",null,f((O=e.value.docInfo)==null?void 0:O.name),1)]),t(U,{name:"arrow"})])]),a("div",ge,[t(b,{border:!1},{default:s(()=>[t(r,{title:"患者信息",value:`${e.value.patientInfo.name} | ${e.value.patientInfo.genderValue} | ${e.value.patientInfo.age}岁`},null,8,["value"]),t(r,{title:"患病时长",value:o(Y)(e.value.illnessTime)},null,8,["value"]),t(r,{title:"就诊情况",value:o(Z)(e.value.consultFlag)},null,8,["value"]),t(r,{title:"病情描述",label:e.value.illnessDesc},null,8,["label"])]),_:1})]),a("div",he,[ke,t(b,{border:!1},{default:s(()=>[t(r,{title:"订单编号"},{value:s(()=>[a("span",{class:"copy",onClick:R},"复制"),n(" "+f(e.value.orderNo),1)]),_:1}),t(r,{title:"创建时间",value:e.value.createTime},null,8,["value"]),t(r,{title:"应付款",value:`¥ ${e.value.payment.toFixed(2)}`},null,8,["value"]),t(r,{title:"优惠券",value:`- ¥ ${e.value.couponDeduction.toFixed(2)}`,class:h({price:Number(e.value.couponDeduction.toFixed(2))>0})},null,8,["value","class"]),t(r,{title:"积分抵扣",value:`- ¥ ${e.value.pointDeduction.toFixed(2)}`,class:h({price:Number(e.value.pointDeduction.toFixed(2))>0})},null,8,["value","class"]),t(r,{title:"实付款",value:`¥ ${e.value.actualPayment.toFixed(2)}`,class:"price"},null,8,["value"])]),_:1})]),e.value.status===o(p).ConsultPay?(i(),c("div",Ie,[n(" 请在"),t(W,{time:e.value.countdown*1e3},null,8,["time"]),n("内完成支付，超时订单将取消 ")])):_("",!0),e.value.status===o(p).ConsultPay?(i(),c("div",we,[a("div",$e,[xe,a("span",null,"¥ "+f(e.value.actualPayment),1)]),t(u,{type:"default",round:"",loading:o(I),onClick:l[0]||(l[0]=d=>o(w)(e.value))},{default:s(()=>[n("取消问诊")]),_:1},8,["loading"]),t(u,{type:"primary",round:"",onClick:l[1]||(l[1]=d=>g.value=!0)},{default:s(()=>[n("继续支付")]),_:1})])):_("",!0),e.value.status===o(p).ConsultWait?(i(),c("div",De,[t(u,{type:"default",round:"",loading:o(I),onClick:l[2]||(l[2]=d=>o(w)(e.value))},{default:s(()=>[n("取消问诊")]),_:1},8,["loading"]),t(u,{type:"primary",round:"",to:`/room?orderId=${e.value.id}`},{default:s(()=>[n("继续沟通")]),_:1},8,["to"])])):_("",!0),e.value.status===o(p).ConsultChat?(i(),c("div",be,[e.value.prescriptionId?(i(),k(u,{key:0,type:"default",round:"",onClick:l[3]||(l[3]=d=>{var m;return o(x)((m=e.value)==null?void 0:m.prescriptionId)})},{default:s(()=>[n("查看处方")]),_:1})):_("",!0),t(u,{type:"primary",round:"",to:`/room?orderId=${e.value.id}`},{default:s(()=>[n("继续沟通")]),_:1},8,["to"])])):_("",!0),e.value.status===o(p).ConsultComplete?(i(),c("div",Pe,[t(z,{display:!e.value.prescriptionId,onOnDelelte:l[4]||(l[4]=d=>o($)(e.value)),onOnPreview:l[5]||(l[5]=d=>{var m;return o(x)((m=e.value)==null?void 0:m.prescriptionId)})},null,8,["display"]),t(u,{type:"default",round:"",to:`/room?orderId=${e.value.id}`},{default:s(()=>[n("问诊记录")]),_:1},8,["to"]),e.value.evaluateId?(i(),k(u,{key:0,type:"default",round:""},{default:s(()=>[n("查看评价")]),_:1})):(i(),k(u,{key:1,type:"primary",round:""},{default:s(()=>[n("写评价")]),_:1}))])):_("",!0),e.value.status===o(p).ConsultCancel?(i(),c("div",Oe,[t(u,{type:"default",round:"",loading:o(N),onClick:l[6]||(l[6]=d=>o($)(e.value))},{default:s(()=>[n("删除订单")]),_:1},8,["loading"]),t(u,{type:"primary",round:"",to:"/"},{default:s(()=>[n("咨询其他医生")]),_:1})])):_("",!0),t(E,{show:g.value,"onUpdate:show":l[7]||(l[7]=d=>g.value=d),"order-id":e.value.id,actualPayment:e.value.actualPayment,"pay-callback":"/room"},null,8,["show","order-id","actualPayment"])])):(i(),c("div",Se,[t(D,{title:"问诊详情"}),t(P,{title:"",row:4,style:{"margin-top":"30px"}}),t(P,{title:"",row:4,style:{"margin-top":"30px"}})]))}}});const st=ne(Te,[["__scopeId","data-v-fc3884c6"]]);export{st as default};
