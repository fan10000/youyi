import{v as Pe}from"./index-5f55da43.js";import{_ as X,$ as de,a0 as Ae,M as ze,G as ue,c as E,a1 as Q,a2 as fe,f as ve,g as Le,l as J,n as N,m as p,e as z,S as ee,W as L,w as j,t as Z,o as q,Z as Ne,x as G,u as Oe,N as Ee,R as Me,k as le,Y as Ze,s as He,a3 as re,A as We,h as De,j as Fe,T as je}from"./index-f7b1a7d1.js";import{u as he}from"./use-id-7753a9b6.js";import{u as U,L as Ue}from"./request-4f3541ce.js";import{a as Ve,r as Ye}from"./use-route-27c093b5.js";import{a as Ge,S as Ke}from"./function-call-8f5e9707.js";import{M as Xe,$ as qe,O as M,u as k,z as be,I as R,y as B,Q as b,Z as ge,N as Qe,G as A,a2 as Je,x as pe,P as et,a3 as tt,a8 as nt}from"./_plugin-vue_export-helper-4a308993.js";import{u as at}from"./use-refs-2bc2aeb5.js";import{c as it}from"./interceptor-4f4458bc.js";function ot(e,l,i){let c=0;const n=e.scrollLeft,a=i===0?1:Math.round(i*1e3/16);function r(){e.scrollLeft+=(l-n)/a,++c<a&&X(r)}r()}function lt(e,l,i,c){let n=de(e);const a=n<l,r=i===0?1:Math.round(i*1e3/16),g=(l-n)/r;function s(){n+=g,(a&&n>l||!a&&n<l)&&(n=l),Ae(e,n),a&&n<l||!a&&n>l?X(s):c&&X(c)}s()}function rt(e,l){if(!ze||!window.IntersectionObserver)return;const i=new IntersectionObserver(a=>{l(a[0].intersectionRatio>0)},{root:document.body}),c=()=>{e.value&&i.observe(e.value)},n=()=>{e.value&&i.unobserve(e.value)};Xe(n),qe(n),ue(c)}const[st,ct]=E("sticky"),dt={zIndex:N,position:p("top"),container:Object,offsetTop:z(0),offsetBottom:z(0)};var ut=M({name:st,props:dt,emits:["scroll","change"],setup(e,{emit:l,slots:i}){const c=k(),n=Q(c),a=be({fixed:!1,width:0,height:0,transform:0}),r=R(()=>fe(e.position==="top"?e.offsetTop:e.offsetBottom)),g=R(()=>{const{fixed:u,height:w,width:h}=a;if(u)return{width:`${h}px`,height:`${w}px`}}),s=R(()=>{if(!a.fixed)return;const u=ve(Le(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${r.value}px`});return a.transform&&(u.transform=`translate3d(0, ${a.transform}px, 0)`),u}),S=u=>l("scroll",{scrollTop:u,isFixed:a.fixed}),m=()=>{if(!c.value||ee(c))return;const{container:u,position:w}=e,h=L(c),f=de(window);if(a.width=h.width,a.height=h.height,w==="top")if(u){const x=L(u),d=x.bottom-r.value-a.height;a.fixed=r.value>h.top&&x.bottom>0,a.transform=d<0?d:0}else a.fixed=r.value>h.top;else{const{clientHeight:x}=document.documentElement;if(u){const d=L(u),I=x-d.top-r.value-a.height;a.fixed=x-r.value<h.bottom&&x>d.top,a.transform=I<0?-I:0}else a.fixed=x-r.value<h.bottom}S(f)};return B(()=>a.fixed,u=>l("change",u)),J("scroll",m,{target:n,passive:!0}),rt(c,m),()=>{var u;return b("div",{ref:c,style:g.value},[b("div",{class:ct({fixed:a.fixed}),style:s.value},[(u=i.default)==null?void 0:u.call(i)])])}}});const ft=j(ut),[vt,se]=E("tab");var ht=M({name:vt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:N,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Z},setup(e,{slots:l}){const i=R(()=>{const n={},{type:a,color:r,disabled:g,isActive:s,activeColor:S,inactiveColor:m}=e;r&&a==="card"&&(n.borderColor=r,g||(s?n.backgroundColor=r:n.color=r));const w=s?S:m;return w&&(n.color=w),n}),c=()=>{const n=b("span",{class:se("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||q(e.badge)&&e.badge!==""?b(Ne,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>b("div",{id:e.id,role:"tab",class:[se([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[c()])}});const[bt,ce]=E("tabs");var gt=M({name:bt,props:{count:G(Number),inited:Boolean,animated:Boolean,duration:G(N),swipeable:Boolean,lazyRender:Boolean,currentIndex:G(Number)},emits:["change"],setup(e,{emit:l,slots:i}){const c=k(),n=g=>l("change",g),a=()=>{var g;const s=(g=i.default)==null?void 0:g.call(i);return e.animated||e.swipeable?b(Ge,{ref:c,loop:!1,class:ce("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[s]}):s},r=g=>{const s=c.value;s&&s.state.active!==g&&s.swipeTo(g,{immediate:!e.inited})};return B(()=>e.currentIndex,r),ge(()=>{r(e.currentIndex)}),U({swipeRef:c}),()=>b("div",{class:ce("content",{animated:e.animated||e.swipeable})},[a()])}});const[me,F]=E("tabs"),mt={type:p("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:z(0),duration:z(.3),animated:Boolean,ellipsis:Z,swipeable:Boolean,scrollspy:Boolean,offsetTop:z(0),background:String,lazyRender:Z,lineWidth:N,lineHeight:N,beforeChange:Function,swipeThreshold:z(5),titleActiveColor:String,titleInactiveColor:String},xe=Symbol(me);var xt=M({name:me,props:mt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:i}){let c,n,a;const r=k(),g=k(),s=k(),S=k(),m=he(),u=Q(r),[w,h]=at(),{children:f,linkChildren:x}=Oe(xe),d=be({inited:!1,position:"",lineStyle:{},currentIndex:-1}),I=R(()=>f.length>e.swipeThreshold||!e.ellipsis||e.shrink),V=R(()=>({borderColor:e.color,background:e.background})),$=(t,o)=>{var v;return(v=t.name)!=null?v:o},te=R(()=>{const t=f[d.currentIndex];if(t)return $(t,d.currentIndex)}),Y=R(()=>fe(e.offsetTop)),ne=R(()=>e.sticky?Y.value+c:0),H=t=>{const o=g.value,v=w.value;if(!I.value||!o||!v||!v[d.currentIndex])return;const T=v[d.currentIndex].$el,y=T.offsetLeft-(o.offsetWidth-T.offsetWidth)/2;ot(o,y,t?0:+e.duration)},_=()=>{const t=d.inited;A(()=>{const o=w.value;if(!o||!o[d.currentIndex]||e.type!=="line"||ee(r.value))return;const v=o[d.currentIndex].$el,{lineWidth:T,lineHeight:y}=e,C=v.offsetLeft+v.offsetWidth/2,P={width:le(T),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&(P.transitionDuration=`${e.duration}s`),q(y)){const oe=le(y);P.height=oe,P.borderRadius=oe}d.lineStyle=P})},we=t=>{const o=t<d.currentIndex?-1:1;for(;t>=0&&t<f.length;){if(!f[t].disabled)return t;t+=o}},W=(t,o)=>{const v=we(t);if(!q(v))return;const T=f[v],y=$(T,v),C=d.currentIndex!==null;d.currentIndex!==v&&(d.currentIndex=v,o||H(),_()),y!==e.active&&(l("update:active",y),C&&l("change",y,T.title)),a&&!e.scrollspy&&He(Math.ceil(re(r.value)-Y.value))},D=(t,o)=>{const v=f.find((y,C)=>$(y,C)===t),T=v?f.indexOf(v):0;W(T,o)},ae=(t=!1)=>{if(e.scrollspy){const o=f[d.currentIndex].$el;if(o&&u.value){const v=re(o,u.value)-ne.value;n=!0,lt(u.value,v,t?0:+e.duration,()=>{n=!1})}}},Te=(t,o,v)=>{const{title:T,disabled:y}=f[o],C=$(f[o],o);y||(it(e.beforeChange,{args:[C],done:()=>{W(o),ae()}}),Ve(t)),l("clickTab",{name:C,title:T,event:v,disabled:y})},Se=t=>{a=t.isFixed,l("scroll",t)},Ce=t=>{A(()=>{D(t),ae(!0)})},ke=()=>{for(let t=0;t<f.length;t++){const{top:o}=L(f[t].$el);if(o>ne.value)return t===0?0:t-1}return f.length-1},Ie=()=>{if(e.scrollspy&&!n){const t=ke();W(t)}},Re=()=>f.map((t,o)=>b(ht,Je({key:t.id,id:`${m}-${o}`,ref:h(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===d.currentIndex,controls:t.id,scrollable:I.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:v=>Te(t,o,v)},We(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Be=()=>{if(e.type==="line"&&f.length)return b("div",{class:F("line"),style:d.lineStyle},null)},ie=()=>{var t,o,v;const{type:T,border:y,sticky:C}=e,P=[b("div",{ref:C?void 0:s,class:[F("wrap"),{[Ze]:T==="line"&&y}]},[b("div",{ref:g,role:"tablist",class:F("nav",[T,{shrink:e.shrink,complete:I.value}]),style:V.value,"aria-orientation":"horizontal"},[(t=i["nav-left"])==null?void 0:t.call(i),Re(),Be(),(o=i["nav-right"])==null?void 0:o.call(i)])]),(v=i["nav-bottom"])==null?void 0:v.call(i)];return C?b("div",{ref:s},[P]):P};B([()=>e.color,Ee],_),B(()=>e.active,t=>{t!==te.value&&D(t)}),B(()=>f.length,()=>{d.inited&&(D(e.active),_(),A(()=>{H(!0)}))});const $e=()=>{D(e.active,!0),A(()=>{d.inited=!0,s.value&&(c=L(s.value).height),H(!0)})},_e=(t,o)=>l("rendered",t,o);return U({resize:()=>{_(),A(()=>{var t,o;return(o=(t=S.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:Ce}),Qe(_),Me(_),ue($e),J("scroll",Ie,{target:u,passive:!0}),x({id:m,props:e,setLine:_,onRendered:_e,currentName:te,scrollIntoView:H}),()=>b("div",{ref:r,class:F([e.type])},[e.sticky?b(ft,{container:r.value,offsetTop:Y.value,onScroll:Se},{default:()=>[ie()]}):ie(),b(gt,{ref:S,count:f.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:W},{default:()=>{var t;return[(t=i.default)==null?void 0:t.call(i)]}})])}});const ye=Symbol(),yt=()=>pe(ye,null),[wt,K]=E("tab"),Tt=ve({},Ye,{dot:Boolean,name:N,badge:N,title:String,disabled:Boolean,titleClass:De,titleStyle:[String,Object],showZeroBadge:Z});var St=M({name:wt,props:Tt,setup(e,{slots:l}){const i=he(),c=k(!1),{parent:n,index:a}=Fe(xe);if(!n)return;const r=()=>{var m;return(m=e.name)!=null?m:a.value},g=()=>{c.value=!0,n.props.lazyRender&&A(()=>{n.onRendered(r(),e.title)})},s=R(()=>{const m=r()===n.currentName.value;return m&&!c.value&&g(),m}),S=k(!s.value);return B(s,m=>{m?S.value=!1:je(()=>{S.value=!0})}),B(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),et(ye,s),()=>{var m;const u=`${n.id}-${a.value}`,{animated:w,swipeable:h,scrollspy:f,lazyRender:x}=n.props;if(!l.default&&!w)return;const d=f||s.value;if(w||h)return b(Ke,{id:i,role:"tabpanel",class:K("panel-wrapper",{inactive:S.value}),tabindex:s.value?0:-1,"aria-hidden":!s.value,"aria-labelledby":u},{default:()=>{var $;return[b("div",{class:K("panel")},[($=l.default)==null?void 0:$.call(l)])]}});const V=c.value||f||!x?(m=l.default)==null?void 0:m.call(l):null;return U({id:i}),tt(b("div",{id:i,role:"tabpanel",class:K("panel"),tabindex:d?0:-1,"aria-labelledby":u},[V]),[[Pe,d]])}}});const Mt=j(St),Zt=j(xt),[Ct,O,kt]=E("list"),It={error:Boolean,offset:z(300),loading:Boolean,disabled:Boolean,finished:Boolean,errorText:String,direction:p("down"),loadingText:String,finishedText:String,immediateCheck:Z};var Rt=M({name:Ct,props:It,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:i}){const c=k(e.loading),n=k(),a=k(),r=yt(),g=Q(n),s=()=>{A(()=>{if(c.value||e.finished||e.disabled||e.error||(r==null?void 0:r.value)===!1)return;const{offset:h,direction:f}=e,x=L(g);if(!x.height||ee(n))return;let d=!1;const I=L(a);f==="up"?d=x.top-I.top<=h:d=I.bottom-x.bottom<=h,d&&(c.value=!0,l("update:loading",!0),l("load"))})},S=()=>{if(e.finished){const h=i.finished?i.finished():e.finishedText;if(h)return b("div",{class:O("finished-text")},[h])}},m=()=>{l("update:error",!1),s()},u=()=>{if(e.error){const h=i.error?i.error():e.errorText;if(h)return b("div",{role:"button",class:O("error-text"),tabindex:0,onClick:m},[h])}},w=()=>{if(c.value&&!e.finished&&!e.disabled)return b("div",{class:O("loading")},[i.loading?i.loading():b(Ue,{class:O("loading-icon")},{default:()=>[e.loadingText||kt("loading")]})])};return B(()=>[e.loading,e.finished,e.error],s),r&&B(r,h=>{h&&s()}),nt(()=>{c.value=e.loading}),ge(()=>{e.immediateCheck&&s()}),U({check:s}),J("scroll",s,{target:g,passive:!0}),()=>{var h;const f=(h=i.default)==null?void 0:h.call(i),x=b("div",{ref:a,class:O("placeholder")},null);return b("div",{ref:n,role:"feed",class:O(),"aria-busy":c.value},[e.direction==="down"?f:x,w(),S(),u(),e.direction==="up"?f:x])}}});const Ht=j(Rt);export{Ht as L,Mt as T,Zt as a};
