import{_ as k}from"./CpNavBar-ea159524.js";import{u as w,b as x}from"./vue-router-fd42b9e3.js";import{h as B,i as I}from"./user-15b71d69.js";import{u as L}from"./index-131db99c.js";import{F as M,m as Q,c as U}from"./rules-a3ea3144.js";import{O as F,u as r,Z as N,o as R,R as T,Q as a,U as p,K as t,S as i,T as z,V as D,W as E,ab as K,X as O,Y as W,_ as X}from"./_plugin-vue_export-helper-4a308993.js";import{a as Y}from"./request-4f3541ce.js";import{F as Z}from"./index-da14ea08.js";import{B as $}from"./index-a2a726fb.js";import"./use-placeholder-ca8c31e0.js";import"./index-f7b1a7d1.js";import"./consult-7375c68e.js";import"./order-59513380.js";import"./index-aff5b717.js";import"./function-call-8f5e9707.js";import"./index-23e5296c.js";import"./interceptor-4f4458bc.js";import"./index-5f55da43.js";import"./index-93886e3d.js";import"./use-route-27c093b5.js";import"./use-id-7753a9b6.js";const j=n=>(O("data-v-3c256cd3"),n=n(),W(),n),q={key:0,class:"login-page"},A=j(()=>i("div",{class:"login-head"},[i("h3",null,"手机绑定")],-1)),G={class:"cp-cell"},H=F({__name:"LoginCallback",setup(n){const u=r(""),d=r(!1);N(()=>{window.QC.Login.check()&&window.QC.Login.getMe(e=>{u.value=e,B(e).then(o=>{f(o)}).catch(()=>{d.value=!0})})});const l=r(""),c=r(),{form:b,time:m,onSend:_}=L(l,"bindMobile"),g=x(),y=w(),f=e=>{y.setUser(e.data),g.replace("/user"),Y("登录成功")},C=async()=>{const e=await I({mobile:l.value,code:c.value,openId:u.value});f(e)};return(e,o)=>{const S=k,v=Z,V=$,h=M;return d.value?(R(),T("div",q,[a(S),A,a(h,{autocomplete:"off",ref_key:"form",ref:b,onSubmit:C},{default:p(()=>[a(v,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=s=>l.value=s),name:"mobile",rules:t(Q),placeholder:"请输入手机号"},null,8,["modelValue","rules"]),a(v,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=s=>c.value=s),name:"code",rules:t(U),placeholder:"请输入验证码"},{button:p(()=>[i("span",{class:D(["btn-send",{active:t(m)>0}]),onClick:o[1]||(o[1]=(...s)=>t(_)&&t(_)(...s))},z(t(m)>0?`${t(m)}s后发送验证码`:"发送验证码"),3)]),_:1},8,["modelValue","rules"]),i("div",G,[a(V,{style:{"margin-top":"50px"},block:"",round:"",type:"primary","native-type":"submit"},{default:p(()=>[E("立即绑定")]),_:1})])]),_:1},512)])):K("",!0)}}});const Co=X(H,[["__scopeId","data-v-3c256cd3"]]);export{Co as default};
